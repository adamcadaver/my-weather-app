(this["webpackJsonpmy-weather-app"]=this["webpackJsonpmy-weather-app"]||[]).push([[0],{22:function(e,t,a){e.exports=a(47)},28:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),c=a.n(l),i=(a(27),a(28),a(10)),o=a.n(i),s=a(21),u=a(3),m=a(4),d=a(6),v=a(5),h=a(2),p=a(7),f=function(e){var t=e.value,a=e.isSelected,n=e.handleClick,l=e.handleRemove,c="list-group-item list-group-item-action col";return a&&(c+=" active"),r.a.createElement("li",{className:"row"},r.a.createElement("div",{className:c,onClick:function(){return n(t)}},t),r.a.createElement("div",{className:"btn btn-danger",onClick:function(){return l(t)}},"X"))},y=function(e){var t=e.items,a=e.selected,n=e.handleClick,l=e.handleRemove;return void 0===t||0===t.size?"No Favorites":r.a.createElement("ul",{className:"list-group"},Array.from(t).map((function(e){return r.a.createElement(f,{value:e,isSelected:e===a,handleClick:n,handleRemove:l,key:e})})))},E=a(9),b=a(8),g=a.n(b),k=new window.google.maps.LatLng(-33.867,151.195),w=new window.google.maps.Map(document.getElementById("map"),{center:k,zoom:15}),C=new window.google.maps.places.PlacesService(w),N=function(e,t){var a=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();return t.filter((function(e){var t=e.startTime.slice(0,10).split("-").map((function(e){return parseInt(e,10)})),l=Object(E.a)(t,3),c=l[0],i=l[1],o=l[2];return a===c&&n===i&&r===o}))},S=function(e){return function(e){return new Promise((function(t,a){try{C.findPlaceFromQuery({query:e,fields:["geometry"]},(function(e){var n=Object(E.a)(e,1)[0];try{var r={lat:n.geometry.location.lat(),lng:n.geometry.location.lng()};t(r)}catch(l){a(l)}}))}catch(n){return Promise.reject(n)}}))}(e).then((function(e){var t=e.lat,a=e.lng;return g.a.get("https://api.weather.gov/points/".concat(t,",").concat(a))})).then((function(e){return Promise.all([g.a.get(e.data.properties.forecast),g.a.get(e.data.properties.forecastHourly)])})).then((function(e){var t=Object(E.a)(e,2),a=t[0],n=t[1];return{sevenDay:a.data.properties.periods,hourly:N(new Date,n.data.properties.periods)}})).catch((function(e){return e}))},F={get:function(){var e=localStorage.getItem("favorites");return null===e||""===e?new Set:new Set(e.trim().split(","))},set:function(e){localStorage.setItem("favorites",Array.from(e))}},j=function(e){var t=e.name,a=e.temperature,n=e.icon,l=e.shortForecast;return r.a.createElement("tr",null,r.a.createElement("td",null,t),r.a.createElement("td",null,r.a.createElement("img",{src:n,alt:""})),r.a.createElement("td",null,l),r.a.createElement("td",null,r.a.createElement("span",{className:"badge badge-primary badge-pill"},a,"F")))},O=function(e){var t=e.sevenDay;return r.a.createElement("table",{className:"table table-sm"},r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(j,{key:e.number,name:e.name,temperature:e.temperature,icon:e.icon,shortForecast:e.shortForecast})}))))},D=function(e){var t=e.hourly;return r.a.createElement("table",{className:"table table-sm"},r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(A,{key:e.number,startTime:e.startTime,temperature:e.temperature,icon:e.icon,shortForecast:e.shortForecast})}))))},A=function(e){var t=e.startTime,a=e.temperature,n=e.icon,l=e.shortForecast,c=t.slice(11,13),i=parseInt(c,10),o=i<12?" AM":" PM";return r.a.createElement("tr",null,r.a.createElement("td",null,i%12+o),r.a.createElement("td",null,r.a.createElement("img",{src:n,alt:""})),r.a.createElement("td",null,l),r.a.createElement("td",null,r.a.createElement("span",{className:"badge badge-primary badge-pill"},a,"F")))},I=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(v.a)(t).call(this,e))).state={isHourly:!0},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"handleClick",value:function(e){this.setState({isHourly:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.error,l=t.hourly,c=t.sevenDay,i=this.state.isHourly;return a?r.a.createElement("h5",null,"Loading..."):n?r.a.createElement("h5",null,n):l&&c?r.a.createElement("div",null,r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:i?"nav-link active":"nav-link",onClick:function(){e.handleClick(!0)}},"Hourly")),r.a.createElement("li",{className:"nav-item "},r.a.createElement("button",{className:i?"nav-link":"nav-link active",onClick:function(){e.handleClick(!1)}},"Seven Day"))),r.a.createElement("div",{style:i?{}:{display:"none"}},r.a.createElement(D,{hourly:l})),r.a.createElement("div",{style:i?{display:"none"}:{}},r.a.createElement(O,{sevenDay:c}))):r.a.createElement("h5",null,"Select favorite or enter zipcode into input")}}]),t}(r.a.Component),q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(v.a)(t).call(this,e))).state={favorites:F.get(),selected:void 0,query:"",loading:!1,hourly:void 0,sevenDay:void 0,error:void 0},a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleClick=a.handleClick.bind(Object(h.a)(a)),a.addFavorite=a.addFavorite.bind(Object(h.a)(a)),a.removeFavorite=a.removeFavorite.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"handleSubmit",value:function(e){var t=this.state.query;this.handleClick(t.padStart(5,"0")),e.preventDefault()}},{key:"handleClick",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({selected:t,query:"",loading:!0}),e.next=3,S(t);case 3:(a=e.sent).isAxiosError?n="Forecast not available for this zipcode. Try another.":a.stack&&(n="Unable to find this zipcode. Try another."),this.setState({loading:!1,hourly:a.hourly,sevenDay:a.sevenDay,error:n});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState({query:e.target.value})}},{key:"addFavorite",value:function(e){var t=new Set(this.state.favorites);t.add(this.state.selected),this.setState({favorites:t}),F.set(t),e.preventDefault()}},{key:"removeFavorite",value:function(e){var t=new Set(this.state.favorites);t.delete(e),this.setState({favorites:t}),F.set(t)}},{key:"render",value:function(){var e=this.state,t=e.selected,a=e.favorites,n=e.query,l=e.loading,c=e.hourly,i=e.sevenDay,o=e.error,s=t?"Weather for ".concat(t):"";return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h1",{className:"App-header"},"My Weather App")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("div",{className:"row"},r.a.createElement("h2",null,"Favorites")),r.a.createElement("div",{className:"row"},r.a.createElement(y,{items:a,selected:t,handleClick:this.handleClick,handleRemove:this.removeFavorite}))),r.a.createElement("div",{className:"col-sm"},r.a.createElement("div",{className:"row"},r.a.createElement("form",null,r.a.createElement("input",{type:"number",name:"zipcodeInput",value:n,onChange:this.handleChange}),r.a.createElement("button",{type:"submit",name:"submit",onClick:this.handleSubmit},"Submit"))),r.a.createElement("div",{className:"row"},r.a.createElement("h3",null,s),s&&!a.has(t)?r.a.createElement("button",{type:"submit",onClick:this.addFavorite},"Add as a favorite"):""),r.a.createElement("div",{className:"row"},r.a.createElement(I,{hourly:c,sevenDay:i,loading:l,error:o})))))}}]),t}(r.a.Component);c.a.render(r.a.createElement(q,null),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.44752b01.chunk.js.map